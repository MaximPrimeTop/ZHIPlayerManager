# ZHIPlayerManager
多功能的管理玩家插件

## 功能介绍：

### 1. 查看玩家所有库存
就是把查背包的功能整合在一个插件里了，能查看1.44更新的额外背包栏

### 2. 修改玩家信息
允许修改玩家几乎任何信息，包括，生命、生命上限、魔力、魔力上限、渔夫任务数、火把神激活、恶魔心激活、工匠面包、生命水晶、埃癸斯果、奥术水晶、银河珍珠、粘性蠕虫、珍馐、超级矿车的修改，支持修改在线和不在线玩家

### 3. 允许玩家备份
玩家有时候会在服务器里丢失存档，尤其在游戏卡顿的时候，该插件允许玩家自己手动备份存档，最多五个存档栏超过五个最旧的会自动删除， **回档权限不要给玩家** ，如果这样玩家就可以自由刷东西，建议让管理持有回档权限， **数据记录在 tshock.sqlite 的 Zhipm_PlayerBackUp 表中** 

### 4. 清理玩家数据
允许服务器开荒时输入指令`/zresetallplayers`直接清理所有玩家的所有数据，也可以只清理单个人的，本插件提供的两个数据表也可以用另一个指令清除，具体看下面指令介绍部分

### 5. 复制玩家存档
你可以随时把一个人的存档复制给另一个人，无论他们是否在线

### 6. 记录玩家游玩时间
本插件会记录玩家游玩的时间，不会随着关服而消失， **数据记录在 tshock.sqlite 的 Zhipm_PlayerExtra 表中** 

### 7. 排行榜
目前有游玩时间排榜，总钱数排榜，完成任务鱼数排榜，在 `/zsort` 系列指令中查看

### 8. 更友好的ban指令
此ban指令 `/zban` 支持离线ban，同时封禁 acc，ip，uuid，对名字支持模糊搜索，但只会在找到唯一一个玩家才会ban掉，若模糊搜索找到不止一个玩家，为防止误ban，该指令会让你重新输入

### 9. 允许导出玩家人物存档
`/zout`系列指令允许导出人物数据，并按照当前地图名称为文件夹打包，除了人物数据缺失会导致无法导出，其他都能导出


## 指令
- 权限1:【无，任何人都能使用】
- 指令1： `/zhelp`
- 功能1： 查看该插件下的所有指令帮助
-
- 权限2： `zhipm.save`
- 指令2-1： `/zsave`
- 功能2-1： 备份自己的人物存档
- 指令2-2：`/zvisa [num]`
- 功能2-2： 查看自己备份的库存，num 范围 1 ~ 5  **可不填** ，越小备份越新，默认不输入 num 时自动查看最新的备份 1
- 指令2-3： `/zsaveauto [num]`
- 功能2-3： 允许用户自动备份，数字填每隔 num 分钟自动备份一次，填 0 时关闭此功能
-
- 权限3： `zhipm.back`
- 指令3： `/zback [name] [num]`
- 功能3： 让玩家回档到 num 号备份， **num 可不填** ，不填时默认回档到最新存档 1，这个指令不要给普通玩家，否则他们可以用备份和回档刷物品，仅是为了方便管理使用而设计的
-
- 权限4： `zhipm.clone`
- 指令4： `/zclone [name1] [name2]`
- 功能4： 将 name1 的人物数据复制给 name2 玩家， **name2 可不填** ，不填时默认将 name1 玩家的数据复制给本人
-
- 权限5： `zhipm.modify`
- 指令5-1： `/zmodify help`
- 功能5-1： 查看 zmodify 系列指令帮助，zmodify系列指令均能修改在线或离线的玩家
- 指令5-2： `/zmodify [name] life [num]`
- 功能5-2： 修改玩家的生命值为num
- 指令5-3： `/zmodify [name] lifemax [num]`
- 功能5-3： 修改玩家的生命上限为num
- 指令5-4： `/zmodify [name] mana [num]`
- 功能5-4： 修改玩家的魔力值为num
- 指令5-5： `/zmodify [name] manamax [num]`
- 功能5-5： 修改玩家的最大魔力值为num
- 指令5-6： `/zmodify [name] fish [num]`
- 功能5-6： 修改玩家的钓鱼完成的任务数为num
- 指令5-7： `/zmodify [name] torch [0或1]`
- 功能5-7： 关闭或开启玩家的火把神或增益
- 指令5-8： `/zmodify [name] demmon [0或1]`
- 功能5-8： 关闭或开启玩家的恶魔心或增益
- 指令5-9： `/zmodify [name] bread [0或1]`
- 功能5-9： 关闭或开启玩家的或工匠面包增益
- 指令5-10： `/zmodify [name] heart [0或1]`
- 功能5-10： 关闭或开启玩家的或生命水晶（埃癸斯水晶）增益
- 指令5-11： `/zmodify [name] fruit [0或1]`
- 功能5-11： 关闭或开启玩家的或埃癸斯果增益
- 指令5-12： `/zmodify [name] star [0或1]`
- 功能5-12： 关闭或开启玩家的或奥术水晶增益
- 指令5-13： `/zmodify [name] pearl [0或1]`
- 功能5-13： 关闭或开启玩家的或银河珍珠增益
- 指令5-14： `/zmodify [name] worm [0或1]`
- 功能5-14： 关闭或开启玩家的或粘性蠕虫增益
- 指令5-15： `/zmodify [name] ambrosia [0或1]`
- 功能5-15： 关闭或开启玩家的或珍馐增益
- 指令5-16： `/zmodify [name] cart [0或1]`
- 功能5-16： 关闭或开启玩家的或超级矿车增益
- 指令5-17： `/zmodify [name] enhance [0或1]`
- 功能5-17： 关闭或开启玩家的或所有增益
-
- 权限6： `zhipm.freeze`
- 指令6-1： `/zfre [name]`
- 功能6-1： 冻结这个玩家，从 name,uuid,ip 三个数据进行比对冻结
- 指令6-2： `/zunfre [name]`
- 功能6-2： 解冻这个玩家
- 指令6-3： `/zunfre all`
- 功能6-3： 解冻所有玩家
-
- 权限7： `zhipm.reset`
- 指令7-1： `/zresetbuff [name]`
- 功能7-1： 重置这个玩家所有Buff
- 指令7-2： `/zresetbuff all`
- 功能7-2： 重置所有玩家的所有Buff
- 指令7-3： `/zresetdb [name]`
- 功能7-3： 重置这个玩家的备份数据，删除备份数据库中的数据
- 指令7-4： `/zresetdb all`
- 功能7-4： 重置所有玩家的备份数据
- 指令7-5： `/zresetex [name]`
- 功能7-5： 重置这个玩家的额外数据，删除额外数据库中的数据
- 指令7-6： `/zresetex all`
- 功能7-6： 重置所有玩家的额外数据
- 指令7-7： `/zreset [name]`
- 功能7-7： 重置这个玩家的人物数据，按照 tshock 的 ssconfig.json 的配置进行重置
- 指令7-8： `/zreset all`
- 功能7-8： 重置所有玩家的人物数据，按照 tshock 的 ssconfig.json 的配置进行重置
- 指令7-9： `/zresetallplayers`
- 功能7-9： 重置所有玩家的所有数据，适合新开荒时使用， **这个指令会删掉原版 tsCharacter 表和插件 Zhipm_PlayerBackUp 和 Zhipm_PlayerExtra 表中的所有数据！** 
-
- 权限8： `zhipm.vi`
- 指令8-1： `/vi [name]`
- 功能8-1： 查询这个玩家的所有库存，按顺序排列
- 指令8-2： `/vid [name]`
- 功能8-2： 查询这个玩家的所有库存，不按顺序排列
- 指令8-3： `/vit [name]`
- 功能8-3： 查询这个玩家的所有库存，不按顺序排列，仅返回纯文本
-
- 权限9： `zhipm.vs`
- 指令9-1： `/vs [name]`
- 功能9-1： 查询这个玩家的所有状态数据
- 指令9-2： `/vst [name]`
- 功能9-2： 查询这个玩家的所有状态数据，仅返回纯文本
-
- 权限10： `zhipm.sort`
- 指令10-1： `/zsort help`
- 功能10-1： 查看 zsort 系列指令的帮助
- 指令10-2： `/zsort time [num/all]`
- 功能10-2： 对当前服务器内所有玩家的在线时间进行降序排列， **不填 num 默认只陈列前10名** ，填 num 表示陈列前 num 名，填 all 表示陈列所有排名
- 指令10-3： `/zsort coin [num/all]`
- 功能10-3： 对当前服务器内所有玩家的钱币数进行降序排列， **不填 num 默认只陈列前10名** ，填 num 表示陈列前 num 名，填 all 表示陈列所有排名
- 指令10-4： `/zsort fish [num/all]`
- 功能10-4： 对当前服务器内所有玩家的钓鱼任务完成数进行降序排列， **不填 num 默认只陈列前10名** ，填 num 表示陈列前 num 名，填 all 表示陈列所有排名
-
- 权限11： `zhipm.export`
- 指令11： `/zout [name/all]`
- 功能11： 导出这个叫 name 的人物的存档，填 all 则导出所有人物的存档
-
- 权限12： `zhipm.ban`
- 指令12： `/zban add [name]`
- 功能12： 优化过的ban指令，能办掉离线的用户，支持模糊搜索，当搜索结果不唯一时 ban 失败，避免误封的情况，此指令会同时封禁acc, ip, uuid并在指令成功后计入日志并发出广播



## 其他
-  **不要把备份权限和回档权限同时给玩家** ，这样做他们就可以自由刷物品了
-
- 看着指令权限挺多，其实只建议给默认玩家`zhipm.save`, `zhipm.sort`, `zhipm.vi`, `zhipm.vs` 这几个权限就够了，其他的指令超管能自动获取并使用，在游戏内可以用`/zhelp`查阅所有指令的用法